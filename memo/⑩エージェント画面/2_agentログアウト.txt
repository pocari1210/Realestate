
2_agentログアウト

◆ルートの編集◆

ディレクトリ
\routes\web.php

・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・

  // agentのログアウト処理のルート
  Route::get('/agent/logout', [AgentController::class, 'AgentLogout'])
    ->name('agent.logout');

/////////////////////////////////////////////////////////////////////////////////////////////////

◆ビューの編集(遷移元)◆

ディレクトリ
\resources\views\agent\body\header.blade.php

・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・

<li class="dropdown-item py-2">
  <a href="{{ route('agent.logout') }}" class="text-body ms-0">
    <i class="me-2 icon-md" data-feather="log-out"></i>
    <span>Log Out</span>
  </a>
</li>

/////////////////////////////////////////////////////////////////////////////////////////////////

◆コントローラーの編集◆

ディレクトリ
\app\Http\Controllers\AgentController.php

・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・

  public function AgentLogout(Request $request)
  {
    Auth::guard('web')->logout();

    $request->session()->invalidate();

    $request->session()->regenerateToken();

    $notification = array(
      'message' => 'ログアウトが成功しました',
      'alert-type' => 'success'
    );

    return redirect('/agent/login')->with($notification);
  } // End Method 

/////////////////////////////////////////////////////////////////////////////////////////////////
